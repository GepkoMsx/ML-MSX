;; ==[ CALL ToHex ]===============================================
;; translates a value to its HEX String ($#E --> "3E")
;;
;; INPUT
;; A the value
;;
;; OUTPUT
;; DE the 2 characters.

ToHex:
    ld b, a             ; Bewaar de originele byte in B
    
    and $F0             ; Isoleer de bovenste 4 bits
    rrca
    rrca
    rrca
    rrca                ; Verschuif naar de onderste 4 bits
    call ToHex_NIBBLE
    ld d, a             ; Sla eerste ASCII-karakter op in H

    ld a, b             ; Verwerk de Low Nibble (rechter 4 bits)
    and $0F             ; Isoleer de onderste 4 bits
    call ToHex_NIBBLE
    ld e, a             ; Sla tweede ASCII-karakter op in L
    ret

ToHex_NIBBLE:
    cp 10               ; Is de waarde 0-9 of 10-15 (A-F)?
    jr c, ToHex_DIGIT   ; Als waarde < 10, ga naar IS_DIGIT
    add a, 7            ; Verspringing in ASCII-tabel van '9' naar 'A'
ToHex_DIGIT:
    add a, 48           ; Voeg ASCII-waarde van '0' toe
    ret